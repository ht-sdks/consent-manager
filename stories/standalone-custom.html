<html lang="en">
  <body>
    <script type="application/javascript">
      window.consentManagerConfig = function(exports) {
        exports.preferences.onPreferencesSaved(function(prefs) {
          // could be used to store consent server side, or send it into an API
        })

        return {
          container: '#consent-manager',
          writeKey: process.env.STORYBOOK_WRITE_KEY,
          /* initialPreferences allows for customizing which categories already pre-loaded */
          initialPreferences: {
            marketingAndAnalytics: false,
            // functional: true will automatically record consent for functional cookies
            functional: true
          },
          /*
          The consent manager ships with a lightweight version of
          React (preact) that you can use to customize the consent manager further
        */
          bannerContent: exports.React.createElement('span', null, 'üç™We like cookies üç™'),
          bannerSubContent: 'Change your preferences üëª',
          preferencesDialogContent: 'We use data collected by cookies and JavaScript libraries.'
        }
      }
    </script>

    <div id="consent-manager"></div>

    <div>
      <img src="http://giphygifs.s3.amazonaws.com/media/13HBDT4QSTpveU/giphy.gif" />
    </div>

    <button
      type="button"
      onclick="event.stopPropagation(); window.consentManager.openConsentManager()"
    >
      Data Collection and Cookie Preferences
    </button>

    <script src="./standalone/consent-manager.js" defer></script>

    <!-- Load events.js -->
    <script type="text/javascript">
      !(function() {
        var e = (window.htevents = window.htevents || [])
        if (!e.initialize)
          if (e.invoked)
            window.console && console.error && console.error('Hightouch snippet included twice.')
          else {
            ;(e.invoked = !0),
              (e.methods = [
                'trackSubmit',
                'trackClick',
                'trackLink',
                'trackForm',
                'pageview',
                'identify',
                'reset',
                'group',
                'track',
                'ready',
                'alias',
                'debug',
                'page',
                'once',
                'off',
                'on',
                'addSourceMiddleware',
                'addIntegrationMiddleware',
                'setAnonymousId',
                'addDestinationMiddleware'
              ]),
              (e.factory = function(t) {
                return function() {
                  var n = Array.prototype.slice.call(arguments)
                  return n.unshift(t), e.push(n), e
                }
              })
            for (var t = 0; t < e.methods.length; t++) {
              var n = e.methods[t]
              e[n] = e.factory(n)
            }
            ;(e.load = function(t, n) {
              var o = document.createElement('script')
              ;(o.type = 'text/javascript'),
                (o.async = !0),
                (o.src = 'https://cdn.hightouch-events.com/browser/release/v1-latest/events.min.js')
              var r = document.getElementsByTagName('script')[0]
              r.parentNode.insertBefore(o, r), (e._loadOptions = n), (e._writeKey = t)
            }),
              (e.SNIPPET_VERSION = '0.0.1'),
              e.page()
          }
      })()
    </script>
  </body>
</html>
